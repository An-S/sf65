        lda     #$00

        .proc       firstProc

            .proc       secondProc      ;prev line was empty
                .proc       thirdProc
                .endproc
            .endproc

alabel:     ;a label with one empty line after .endproc
        .endproc

        ;a comment directly after .endproc

        lda     #$00

        .proc       secondProc      ;prev line was empty
            .proc       thirdProc
            .endproc
        .endproc

alabel: ;a label without empty line after .endproc

        lda     #$00

        .proc       secondProc
label

            .proc       thirdProc
label
            .endproc

label
        .endproc

alabel: ;a label without empty line after .endproc